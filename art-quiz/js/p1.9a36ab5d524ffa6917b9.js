(()=>{"use strict";const e=document.querySelector(".categories"),t=document.querySelector(".categories__items");let s;const c=document.querySelector(".score");t.addEventListener("click",(t=>{t.target.closest(".category-item__score")&&(e.classList.add("hide"),c.classList.remove("hide"))})),document.querySelector(".score__home").addEventListener("click",(()=>{c.classList.add("hide"),m.classList.remove("hide")})),document.querySelector(".score__categories").addEventListener("click",(()=>{c.classList.add("hide"),e.classList.remove("hide")})),t.addEventListener("click",(e=>{e.target.closest(".category-item__score")&&(s=e.target.closest(".category-item__score").id,function(){const e=document.querySelector(".score__items");let t="";e.innerHTML="",L[s].forEach(((c,a)=>{t=`<div class="score__item score-item" id = "${a}">\n     <div class="score-item__header">\n       <div class="score-item__title">01</div>\n     </div>\n     <div class="score-item__img">\n       <img src = https://raw.githubusercontent.com/ElenaPogodaeva/image-data/master/img/${c.imageNum}.jpg>     \n     </div>\n     <div class="score-item__info">\n       <p class="score-item__text text">${c.name}</p>\n       <p class="score-item__text text">${c.author}</p>\n       <p class="score-item__text text">${c.year}</p>\n     </div>\n    </div>`,e.insertAdjacentHTML("afterbegin",t);const o=document.querySelector(".score__item");"author"===p?!0===M[s][a]&&o.classList.add("score-item-correct"):!0===C[s][a]&&o.classList.add("score-item-correct")})),Array.from(document.querySelectorAll(".score__item")).forEach(((e,t)=>{e.addEventListener("click",(()=>{document.querySelectorAll(".score-item__info")[t].classList.toggle("score-item__info_show")}))}))}())}));const a=document.querySelector(".settings"),o=document.querySelector(".volume-progress"),n=document.querySelector(".volume__icon"),r=Array.from(document.querySelectorAll("audio")),i=r[0];function d(e){const t=document.querySelector(`audio[data-volume="${e}"]`);t.currentTime=0,t.play()}function l(){const e=o.value;o.style.background=`linear-gradient(to right, #710707 0%, #710707 ${100*e}%, #c4c4c4 ${100*e}%, #c4c4c4 100%)`}o.addEventListener("input",(function(){const e=o.value;r.forEach((t=>{t.volume=e,0===t.volume?t.muted=!0:t.muted=!1,l()}))})),i.addEventListener("volumechange",(function(){i.muted||0===i.volume?n.classList.add("mute"):n.classList.remove("mute")})),n.addEventListener("click",(function(){r.forEach((e=>{e.muted?(e.muted=!1,o.value=.5,e.volume=o.value,l()):(e.muted=!0,o.value=0,l())}))})),document.querySelector(".settings__button").addEventListener("click",(()=>{a.classList.add("hide"),m.classList.remove("hide")}));const m=document.querySelector(".main-screen"),u=document.querySelector(".artists"),_=document.querySelector(".pictures");let g,L,v,p;async function h(){try{p=this.id;const s="./assets/data/data.json",c=await async function(e){const t=await fetch(e);return await t.json()}(s);g="author"===p?c.slice(0,120):c.slice(120),v=10,L=function(e,t){let s=[];for(let t=0;t<e.length;t+=10)s.push(e.slice(t,t+10));return s}(g),function(e){let s="";const c=["Portrait","Landscape","Still life","Graphic","Antique","Avant-garde","Renaissance","Surrealism","Kitsch","Minimalism","Interior","Industrial"];e.map(((e,t)=>{const a=document.createElement("img");a.src=`https://raw.githubusercontent.com/ElenaPogodaeva/image-data/master/img/${e[0].imageNum}.jpg`,s+=`<div class="categories__item category-item" id = "${t}">\n     <div class="category-item__header">\n       <div class="category-item__title">${c[t]}</div>\n       <div class="category-item__total"></div>\n     </div>\n     <div class="category-item__img">\n       <img src = ${a.src}>     \n     </div>\n     <button class="category-item__score" id = "${t}">Score</button>\n   </div>`})),t.innerHTML=s;const a=document.querySelectorAll(".category-item");for(let e=0;e<12;e++)"author"===p&&!0===k[e]&&a[e].classList.add("category-item-played"),"picture"===p&&!0===A[e]&&a[e].classList.add("category-item-played")}(L),m.classList.add("hide"),e.classList.remove("hide")}catch(e){alert(e)}}u.addEventListener("click",h),_.addEventListener("click",h),document.querySelector(".categories__button").addEventListener("click",(()=>{e.classList.add("hide"),m.classList.remove("hide")})),document.querySelector(".button-settings").addEventListener("click",(()=>{m.classList.add("hide"),a.classList.remove("hide")}));const y=document.querySelector(".categories__items"),E=document.querySelector(".question"),f=document.querySelector(".question-wrapper"),q=document.querySelector(".question-author-text"),S=document.querySelector(".modal");let b,w,x,$,k=[],A=[],M=[],C=[];function H(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function T(e){e.sort((()=>Math.random()-.5))}function j(){"author"===p?function(){f.innerHTML="";const e=document.createElement("div");e.classList.add("question-author__wrapper"),f.append(e),q.textContent="Кто автор данной картины?";let t=L[$][w].imageNum;const s=document.createElement("img");s.src=`https://raw.githubusercontent.com/ElenaPogodaeva/image-data/master/img/${t}.jpg`,s.alt="picture",e.append(s),b=L[$][w].author;const c=new Set;for(c.add(b);c.size<4;){let e=H(0,g.length-1);c.add(g[e].author)}const a=Array.from(c);T(a);const o=document.createElement("ul");o.classList.add("question-author__answers","answers"),a.map((e=>{const t=document.createElement("li");t.classList.add("answers__item"),t.textContent=e,t.setAttribute("data-answer",e),o.append(t)})),f.append(o),o.addEventListener("click",(e=>{e.target.classList.contains("answers__item")&&N(e)}))}():function(){f.innerHTML="";const e=document.createElement("div");e.classList.add("picture-container"),f.append(e);let t=L[$][w].author;q.textContent=`Какую картину нарисовал ${t}?`,b=L[$][w].imageNum;const s=new Set;for(s.add(b);s.size<4;){let e=H(0,g.length-1);g[e].author!==t&&s.add(g[e].imageNum)}const c=Array.from(s);T(c),c.map(((t,s)=>{const c=document.createElement("img");c.classList.add("question-picture__item"),c.src=`https://raw.githubusercontent.com/ElenaPogodaeva/image-data/master/img/${t}.jpg`,c.setAttribute("data-answer",t),c.alt=`picture${s+1}`,e.append(c)})),e.addEventListener("click",(e=>{e.target.classList.contains("question-picture__item")&&N(e)}))}()}function N(e){!function(){const e=document.querySelector(".modal__content"),t=L[$][w].imageNum,s=L[$][w].name,c=L[$][w].author,a=L[$][w].year;e.innerHTML="";const o=document.createElement("div");o.classList.add("modal__answer");const n=document.createElement("img");n.classList.add("modal__img"),n.src=`https://raw.githubusercontent.com/ElenaPogodaeva/image-data/master/img/${t}.jpg`;const r=document.createElement("div");r.classList.add("modal__title","text"),r.textContent=`${s}`;const i=document.createElement("div");i.classList.add("modal__author","text"),i.textContent=`${c}`;const d=document.createElement("div");d.classList.add("modal__year","text"),d.textContent=`${a}`;const l=document.createElement("button");l.classList.add("button","button-next"),l.textContent="Next",e.append(o),e.append(n),e.append(r),e.append(i),e.append(d),e.append(l),S.classList.add("open"),l.addEventListener("click",P)}();const t=document.querySelector(".modal__answer"),s=document.querySelectorAll(".progress-bar__item");e.target.dataset.answer===b?("author"===p?M[$][w]=!0:C[$][w]=!0,t.classList.add("correct"),s[w].classList.add("progress-bar__item_correct"),x++,d("correct")):("author"===p?M[$][w]=!1:C[$][w]=!1,d("wrong"),t.classList.add("wrong"),s[w].classList.add("progress-bar__item_wrong"))}function P(){if(w++,w<v)S.classList.remove("open"),j();else{S.classList.remove("open"),function(){const t=document.querySelector(".modal__content");t.innerHTML="";const s=document.createElement("div");s.classList.add("modal__cong"),s.textContent="Congratulations!";const c=document.createElement("div");c.classList.add("modal__result"),c.textContent=`${x} / ${v}`;const a=document.createElement("div");a.classList.add("modal__good");const o=document.createElement("div");o.classList.add("modal__wrapper");const n=document.createElement("button");n.classList.add("button","button-next-quiz"),n.textContent="Next Quiz";const r=document.createElement("button");r.classList.add("button","modal-button-home"),r.textContent="Home",t.append(s),t.append(c),t.append(a),t.append(o),o.append(n),o.append(r),S.classList.add("open"),n.addEventListener("click",(()=>{S.classList.remove("open"),E.classList.add("hide"),e.classList.remove("hide")})),r.addEventListener("click",(()=>{S.classList.remove("open"),E.classList.add("hide"),m.classList.remove("hide")})),d("congrat")}();const t=document.querySelector(`.category-item[id="${$}"]`);document.querySelector(`.category-item[id="${$}"] .category-item__total`).textContent=x,t.classList.add("category-item-played"),"author"===p?k[$]=!0:A[$]=!0}}!function(){for(let e=0;e<12;e++)M[e]=[],C[e]=[];for(let e=0;e<12;e++)for(let t=0;t<10;t++)M[e][t]=!1,C[e][t]=!1}(),y.addEventListener("click",(t=>{t.target.closest(".category-item")&&!t.target.closest(".category-item__score")&&($=t.target.closest(".category-item").id,x=0,w=0,j(),function(){const e=document.querySelector(".progress-bar");let t="";for(let e=0;e<10;e++)t+="<div class = 'progress-bar__item'></div>";e.innerHTML=t}(),e.classList.add("hide"),E.classList.remove("hide"))})),document.querySelector(".question__button-home").addEventListener("click",(()=>{E.classList.add("hide"),m.classList.remove("hide")})),document.querySelector(".question__button-categories").addEventListener("click",(()=>{E.classList.add("hide"),e.classList.remove("hide")}))})();