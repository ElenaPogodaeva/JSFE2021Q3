(()=>{"use strict";const e=document.querySelector(".settings-icon"),t=document.querySelector(".settings"),n=document.querySelector(".time"),o=document.querySelector(".date"),c=document.querySelector(".greeting-container"),a=document.querySelector(".player"),r=document.querySelector(".weather"),i=document.querySelector(".change-quote"),s=document.querySelector(".quote-block"),l=document.querySelector('input[id="show-time"]'),u=document.querySelector('input[id="show-date"]'),d=document.querySelector('input[id="show-greeting"]'),m=document.querySelector('input[id="show-audioplayer"]'),h=document.querySelector('input[id="show-weather"]'),g=document.querySelector('input[id="show-quotes"]'),y=(document.querySelectorAll('input[type="checkbox"]'),document.querySelector(".settings-input")),v=document.querySelectorAll("input[name=lang]");let f="en";const p=[{"settings-title-photo":"Photo","settings-text-tag":"Tags","settings-title-lang":"Language","settings-title-show":"Show","label-container-time":"Time","label-container-date":"Date","label-container-quote":"Quotes","label-container-greeting":"Greeting","label-container-player":"Audioplayer","label-container-weather":"Weather"},{"settings-title-photo":"Источник фото","settings-text-tag":"Теги","settings-title-lang":"Язык","settings-title-show":"Отображать","label-container-time":"Время","label-container-date":"Дата","label-container-quote":"Цитата","label-container-greeting":"Приветствие","label-container-player":"Аудио","label-container-weather":"Погода"}];function S(){const e=document.querySelector("input[name=lang]:checked");if(f=e.value,"en"===f)for(let e in p[0])document.querySelector(`[id ="${e}"]`).textContent=p[0][e];else if("ru"===f)for(let e in p[1])document.querySelector(`[id ="${e}"]`).textContent=p[1][e]}e.addEventListener("click",(function(){t.classList.toggle("settings-active")})),l.addEventListener("change",(()=>{l.checked?n.classList.remove("hidden"):n.classList.add("hidden")})),u.addEventListener("change",(()=>{u.checked?o.classList.remove("hidden"):o.classList.add("hidden")})),d.addEventListener("change",(()=>{d.checked?c.classList.remove("hidden"):c.classList.add("hidden")})),m.addEventListener("change",(()=>{m.checked?a.classList.remove("hidden"):a.classList.add("hidden")})),h.addEventListener("change",(()=>{h.checked?r.classList.remove("hidden"):r.classList.add("hidden")})),g.addEventListener("change",(()=>{g.checked?(i.classList.remove("hidden"),s.classList.remove("hidden")):(i.classList.add("hidden"),s.classList.add("hidden"))})),window.addEventListener("beforeunload",(function(){const e=document.querySelector('input[name="photo-source"]:checked');localStorage.setItem("photo-source",e.value);const t=document.querySelector('input[name="lang"]:checked');localStorage.setItem("lang",t.value),localStorage.setItem("tags",y.value);const n=Array.from(document.querySelectorAll('input[type="checkbox"]')).reduce(((e,t)=>Object.assign({},e,{[t.value]:t.checked})),{});localStorage.setItem("chx",JSON.stringify(n))})),v.forEach((e=>e.addEventListener("click",S))),window.addEventListener("load",(function(){if(localStorage.getItem("photo-source")){const e=localStorage.getItem("photo-source");document.querySelector(`input[name=photo-source][value="${e}"]`).checked=!0}if(localStorage.getItem("lang")){const e=localStorage.getItem("lang");document.querySelector(`input[name=lang][value="${e}"]`).checked=!0}if(localStorage.getItem("tags")&&(y.value=localStorage.getItem("tags")),localStorage.getItem("chx")){const e=JSON.parse(localStorage.getItem("chx"))||{};Object.entries(e).forEach((([e,t])=>{t?(document.querySelector(`[value="${e}"]`).checked=!0,document.querySelector(`.${e}`).classList.remove("hidden")):(document.querySelector(`[value="${e}"]`).checked=!1,document.querySelector(`.${e}`).classList.add("hidden"))}))}}));const q=[{title:"Aqua Caelestis",src:"./assets/sounds/Aqua Caelestis.mp3",duration:"00:39"},{title:"River Flows In You",src:"./assets/sounds/River Flows In You.mp3",duration:"01:37"},{title:"Summer Wind",src:"./assets/sounds/Summer Wind.mp3",duration:"01:50"},{title:"Ennio Morricone",src:"./assets/sounds/Ennio Morricone.mp3",duration:"01:37"}];!function(){const e=document.querySelector(".time"),t=document.querySelector(".date"),n=document.querySelector(".greeting"),o=document.querySelectorAll("input[name=lang]"),c=document.querySelector(".name");c.placeholder="Enter name";const a=[{en:"Good night",ru:"Доброй ночи"},{en:"Good morning",ru:"Доброе утро"},{en:"Good afternoon",ru:"Добрый день"},{en:"Good evening",ru:"Добрый вечер"}];function r(){const e=(new Date).toLocaleDateString(f,{weekday:"long",month:"long",day:"numeric"});t.textContent=e}function i(){const e=(new Date).getHours(),t=Math.floor(e/6),o=a[t][f];n.textContent=o}function s(){c.placeholder="ru"===f?"Введите имя":"Enter name",r(),i()}new Date,function t(){const n=(new Date).toLocaleTimeString();e.textContent=n,r(),i(),setTimeout(t,1e3)}(),o.forEach((e=>e.addEventListener("change",s))),window.addEventListener("beforeunload",(function(){const e=document.querySelector(".name");localStorage.setItem("name",e.value)})),window.addEventListener("load",(function(){const e=document.querySelector(".name");localStorage.getItem("name")&&(e.value=localStorage.getItem("name"))}))}(),function(){const e=document.querySelector("body"),t=document.querySelector(".slide-next"),n=document.querySelector(".slide-prev"),o=document.querySelectorAll("input[name=photo-source]");let c="GitHub";const a=document.querySelector(".settings-input");let r,i="",s=[];function l(){const e=(new Date).getHours();return["night","morning","afternoon","evening"][Math.floor(e/6)]}function u(t){const n=new Image;n.src=t,n.onload=()=>{e.style.backgroundImage=`url(${n.src})`}}function d(){u(`https://raw.githubusercontent.com/ElenaPogodaeva/stage1-tasks/assets/images/${l()}/${r.toString().padStart(2,"0")}.jpg`)}async function m(e){""===e&&(e=l());const t=`https://api.unsplash.com/photos/random?query=${e}&client_id=oVE-N1MJGgo0-9JrJ21Qdv0m__vGtwbV0OvlfUutJMg`,n=await fetch(t);u((await n.json()).urls.regular)}async function h(){0===s.length&&(s=await async function(e){let t;if(""===e){let n;switch(e=l()){case"night":n="72157720062587146";break;case"morning":n="72157720069530982";break;case"afternoon":n="72157720111881805";break;case"evening":n="72157720111880160"}t=`https://www.flickr.com/services/rest/?method=flickr.galleries.getPhotos&api_key=76f2ad1b1c2bc03737c9a268bb694c82&gallery_id=${n}&extras=url_h&format=json&nojsoncallback=1`}else t=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=76f2ad1b1c2bc03737c9a268bb694c82&tags=${e}&extras=url_h&format=json&nojsoncallback=1`;const n=await fetch(t);return(await n.json()).photos.photo.filter((e=>e.url_h))}(i));const e=Math.floor(Math.random()*s.length);u(s[e].url_h)}function g(){const e=document.querySelector("input[name=photo-source]:checked");c=e.value}r=Math.floor(20*Math.random())+1,window.addEventListener("load",d),o.forEach((e=>e.addEventListener("click",g))),a.addEventListener("change",(()=>{i=a.value,s=[]})),t.addEventListener("click",(function(){"GitHub"===c?(r<20?r++:r=1,d()):"Unsplash API"===c?m(i):"Flickr API"===c&&h()})),n.addEventListener("click",(function(){"GitHub"===c?(r>1?r--:r=20,d()):"Unsplash API"===c?m(i):"Flickr API"===c&&h()}))}(),function(){const e=document.querySelector(".weather-icon"),t=document.querySelector(".temperature"),n=document.querySelector(".weather-description"),o=document.querySelector(".wind"),c=document.querySelector(".humidity"),a=document.querySelectorAll("input[name=lang]"),r=document.querySelector(".city"),i=document.querySelector(".weather-error"),s=[{en:"Wind speed",ru:"Скорость ветра"},{en:"Humidity",ru:"Влажность"},{en:"m/s",ru:"м/с"}];async function l(a="en"){const l=`https://api.openweathermap.org/data/2.5/weather?q=${r.value}&lang=${a}&appid=19b49def7b99621ed575529c92f7ba37&units=metric`,d=await fetch(l),m=await d.json();"404"===m.cod?(i.textContent="Error! City not found",u()):"400"===m.cod?(i.textContent="Error! Enter the city",u()):(i.textContent="",e.className="weather-icon owf",e.classList.add(`owf-${m.weather[0].id}`),t.textContent=`${m.main.temp.toFixed(0)}°C`,n.textContent=m.weather[0].description,o.textContent=`${s[0][a]} ${m.wind.speed.toFixed(0)} ${s[2][a]}`,c.textContent=`${s[1][a]} ${m.main.humidity.toFixed(0)}%`)}function u(){e.className="",t.textContent="",n.textContent="",o.textContent="",c.textContent=""}function d(){l(document.querySelector("input[name=lang]:checked").value)}r.value="Минск",r.textContent="Минск",document.addEventListener("DOMContentLoaded",l),r.addEventListener("change",(function(){l()})),a.forEach((e=>e.addEventListener("click",d))),window.addEventListener("beforeunload",(function(){localStorage.setItem("city",r.value)})),window.addEventListener("load",(function(){localStorage.getItem("city")&&(r.value=localStorage.getItem("city"),l())}))}(),function(){const e=document.querySelector(".quote"),t=document.querySelector(".author"),n=document.querySelector(".change-quote"),o=document.querySelectorAll("input[name=lang]");async function c(n="en"){const o=`./assets/data/data_${n}.json`,c=await fetch(o),a=await c.json(),r=(i=a.length,Math.floor(Math.random()*i));var i;e.textContent=`"${a[r].text}"`,t.textContent=`${a[r].author}`}function a(){c(document.querySelector("input[name=lang]:checked").value)}c(),n.addEventListener("click",a),o.forEach((e=>e.addEventListener("click",a)))}(),function(){const e=new Audio,t=document.querySelector(".play"),n=document.querySelector(".play-next"),o=document.querySelector(".play-prev"),c=document.querySelector(".volume"),a=document.querySelector(".play-list"),r=document.querySelector(".progress"),i=document.querySelector(".progress-filled"),s=document.querySelector(".current-time"),l=document.querySelector(".duration"),u=document.querySelector(".volume-progress"),d=document.querySelector(".player-title");q.forEach((e=>{const t=document.createElement("li");t.classList.add("play-item"),t.textContent=e.title,a.append(t)}));let m=0,h=!1;const g=document.querySelectorAll(".play-item");function y(){e.src=q[m].src,e.currentTime=0,e.play(),h=!0,t.classList.add("pause"),g.forEach((e=>{e.classList.contains("item-active")&&e.classList.remove("item-active")})),g[m].classList.add("item-active"),l.textContent=q[m].duration,d.textContent=q[m].title}function v(){h?(t.classList.add("pause"),g[m].classList.add("item-active")):(t.classList.remove("pause"),g[m].classList.remove("item-active"))}function f(){m<q.length-1?m++:m=0,y()}function p(t){const n=t.offsetX/r.offsetWidth*e.duration;e.currentTime=n}function S(){const e=u.value;u.style.background=`linear-gradient(to right, #710707 0%, #710707 ${100*e}%, #c4c4c4 ${100*e}%, #c4c4c4 100%)`}d.textContent=q[0].title,s.textContent="00:00",l.textContent=q[0].duration,e.src=q[0].src,e.currentTime=0,g.forEach(((t,n)=>t.addEventListener("click",(()=>{m=n,g.forEach(((t,o)=>{t.classList.contains("item-active")&&o!==n&&(t.classList.remove("item-active"),e.pause())})),e.src=q[m].src,e.currentTime=0,l.textContent=q[m].duration,d.textContent=q[m].title,t.classList.contains("item-active")?(h=!1,e.pause()):(h=!0,e.play()),v()})))),t.addEventListener("click",(function(){h?(e.pause(),h=!1):(e.play(),h=!0),v()})),n.addEventListener("click",f),o.addEventListener("click",(function(){m>0?m--:m=q.length-1,y()})),c.addEventListener("click",(function(){e.muted?(e.muted=!1,u.value=.5,e.volume=u.value,S()):(e.muted=!0,u.value=0,S())}));let L=!1;r.addEventListener("click",p),r.addEventListener("mousemove",(e=>L&&p(e))),r.addEventListener("mousedown",(()=>L=!0)),r.addEventListener("mouseup",(()=>L=!1)),e.addEventListener("timeupdate",(function(){const t=Math.floor(e.currentTime)/Math.floor(e.duration)*100;i.style.width=`${t}%`,s.textContent=function(e){e=Math.floor(e);var t=Math.floor(e/60),n=Math.floor(e-60*t),o=t,c=n;return t<10&&(o="0"+t),n<10&&(c="0"+n),o+":"+c}(e.currentTime)})),u.addEventListener("input",(function(){const t=u.value;e.volume=t,0===e.volume?e.muted=!0:e.muted=!1,S()})),e.addEventListener("volumechange",(function(){e.muted||0===e.volume?c.classList.add("mute"):c.classList.remove("mute")})),e.addEventListener("ended",f)}()})();