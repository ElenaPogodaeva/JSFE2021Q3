(()=>{var e={812:()=>{const e=document.querySelector(".settings-icon"),t=document.querySelector(".settings"),n=document.querySelector(".time"),o=document.querySelector(".date"),c=document.querySelector(".greeting-container"),a=document.querySelector(".player"),r=document.querySelector(".weather"),i=document.querySelector(".change-quote"),s=document.querySelector(".quote-block"),l=document.querySelector('input[id="show-time"]'),u=document.querySelector('input[id="show-date"]'),d=document.querySelector('input[id="show-greeting"]'),m=document.querySelector('input[id="show-audioplayer"]'),h=document.querySelector('input[id="show-weather"]'),g=document.querySelector('input[id="show-quotes"]'),v=(document.querySelectorAll('input[type="checkbox"]'),document.querySelector(".settings-input")),y=document.querySelectorAll("input[name=lang]"),f=[{"settings-title-photo":"Photo","settings-text-tag":"Tags","settings-title-lang":"Language","settings-title-show":"Show","label-container-time":"Time","label-container-date":"Date","label-container-quote":"Quotes","label-container-greeting":"Greeting","label-container-player":"Audioplayer","label-container-weather":"Weather"},{"settings-title-photo":"Источник фото","settings-text-tag":"Теги","settings-title-lang":"Язык","settings-title-show":"Отображать","label-container-time":"Время","label-container-date":"Дата","label-container-quote":"Цитата","label-container-greeting":"Приветствие","label-container-player":"Аудио","label-container-weather":"Погода"}];function p(){const e=document.querySelector("input[name=lang]:checked").value;if("en"===e)for(let e in f[0])document.querySelector(`[id ="${e}"]`).textContent=f[0][e];else if("ru"===e)for(let e in f[1])document.querySelector(`[id ="${e}"]`).textContent=f[1][e]}e.addEventListener("click",(function(){t.classList.toggle("settings-active")})),l.addEventListener("change",(()=>{l.checked?n.classList.remove("hidden"):n.classList.add("hidden")})),u.addEventListener("change",(()=>{u.checked?o.classList.remove("hidden"):o.classList.add("hidden")})),d.addEventListener("change",(()=>{d.checked?c.classList.remove("hidden"):c.classList.add("hidden")})),m.addEventListener("change",(()=>{m.checked?a.classList.remove("hidden"):a.classList.add("hidden")})),h.addEventListener("change",(()=>{h.checked?r.classList.remove("hidden"):r.classList.add("hidden")})),g.addEventListener("change",(()=>{g.checked?(i.classList.remove("hidden"),s.classList.remove("hidden")):(i.classList.add("hidden"),s.classList.add("hidden"))})),window.addEventListener("beforeunload",(function(){const e=document.querySelector('input[name="photo-source"]:checked');localStorage.setItem("photo-source",e.value);const t=document.querySelector('input[name="lang"]:checked');localStorage.setItem("lang",t.value),localStorage.setItem("tags",v.value);const n=Array.from(document.querySelectorAll('input[type="checkbox"]')).reduce(((e,t)=>Object.assign({},e,{[t.value]:t.checked})),{});localStorage.setItem("chx",JSON.stringify(n))})),y.forEach((e=>e.addEventListener("click",p))),window.addEventListener("load",(function(){if(localStorage.getItem("photo-source")){const e=localStorage.getItem("photo-source");document.querySelector(`input[name=photo-source][value="${e}"]`).checked=!0}if(localStorage.getItem("lang")){const e=localStorage.getItem("lang");document.querySelector(`input[name=lang][value="${e}"]`).checked=!0}if(localStorage.getItem("tags")&&(v.value=localStorage.getItem("tags")),localStorage.getItem("chx")){const e=JSON.parse(localStorage.getItem("chx"))||{};Object.entries(e).forEach((([e,t])=>{t?(document.querySelector(`[value="${e}"]`).checked=!0,document.querySelector(`.${e}`).classList.remove("hidden")):(document.querySelector(`[value="${e}"]`).checked=!1,document.querySelector(`.${e}`).classList.add("hidden"))}))}}))}},t={};function n(o){var c=t[o];if(void 0!==c)return c.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}(()=>{"use strict";n(812);const e=[{title:"Aqua Caelestis",src:"./assets/sounds/Aqua Caelestis.mp3",duration:"00:39"},{title:"River Flows In You",src:"./assets/sounds/River Flows In You.mp3",duration:"01:37"},{title:"Summer Wind",src:"./assets/sounds/Summer Wind.mp3",duration:"01:50"},{title:"Ennio Morricone",src:"./assets/sounds/Ennio Morricone.mp3",duration:"01:37"}];!function(){const e=document.querySelector(".time"),t=document.querySelector(".date"),n=document.querySelector(".greeting"),o=document.querySelectorAll("input[name=lang]"),c=document.querySelector(".name");c.placeholder="Enter name";const a=[{en:"Good night",ru:"Доброй ночи"},{en:"Good morning",ru:"Доброе утро"},{en:"Good afternoon",ru:"Добрый день"},{en:"Good evening",ru:"Добрый вечер"}];function r(e="en"){const n=(new Date).toLocaleDateString(e,{weekday:"long",month:"long",day:"numeric"});t.textContent=n}function i(e="en"){const t=(new Date).getHours(),o=Math.floor(t/6),c=a[o][e];n.textContent=c}function s(){const e=document.querySelector("input[name=lang]:checked").value;c.placeholder="ru"===e?"Введите имя":"Enter name",r(e),i(e)}new Date,function t(n="en"){const o=(new Date).toLocaleTimeString();e.textContent=o,setTimeout(t,1e3)}(),r(),i(),o.forEach((e=>e.addEventListener("change",s))),window.addEventListener("beforeunload",(function(){const e=document.querySelector(".name");localStorage.setItem("name",e.value)})),window.addEventListener("load",(function(){const e=document.querySelector(".name");localStorage.getItem("name")&&(e.value=localStorage.getItem("name"))}))}(),function(){const e=document.querySelector("body"),t=document.querySelector(".slide-next"),n=document.querySelector(".slide-prev"),o=document.querySelectorAll("input[name=photo-source]");let c="GitHub";const a=document.querySelector(".settings-input");let r,i="",s=[];function l(){const e=(new Date).getHours();return["night","morning","afternoon","evening"][Math.floor(e/6)]}function u(t){const n=new Image;n.src=t,n.onload=()=>{e.style.backgroundImage=`url(${n.src})`}}function d(){u(`https://raw.githubusercontent.com/ElenaPogodaeva/stage1-tasks/assets/images/${l()}/${r.toString().padStart(2,"0")}.jpg`)}async function m(e){""===e&&(e=l());const t=`https://api.unsplash.com/photos/random?query=${e}&client_id=oVE-N1MJGgo0-9JrJ21Qdv0m__vGtwbV0OvlfUutJMg`,n=await fetch(t);u((await n.json()).urls.regular)}async function h(){0===s.length&&(s=await async function(e){let t;if(""===e){let n;switch(e=l()){case"night":n="72157720062587146";break;case"morning":n="72157720069530982";break;case"afternoon":n="72157720111881805";break;case"evening":n="72157720111880160"}t=`https://www.flickr.com/services/rest/?method=flickr.galleries.getPhotos&api_key=76f2ad1b1c2bc03737c9a268bb694c82&gallery_id=${n}&extras=url_h&format=json&nojsoncallback=1`}else t=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=76f2ad1b1c2bc03737c9a268bb694c82&tags=${e}&extras=url_h&format=json&nojsoncallback=1`;const n=await fetch(t);return(await n.json()).photos.photo.filter((e=>e.url_h))}(i));const e=Math.floor(Math.random()*s.length);u(s[e].url_h)}function g(){const e=document.querySelector("input[name=photo-source]:checked");c=e.value}r=Math.floor(20*Math.random())+1,window.addEventListener("load",d),o.forEach((e=>e.addEventListener("click",g))),a.addEventListener("change",(()=>{i=a.value,s=[]})),t.addEventListener("click",(function(){"GitHub"===c?(r<20?r++:r=1,d()):"Unsplash API"===c?m(i):"Flickr API"===c&&h()})),n.addEventListener("click",(function(){"GitHub"===c?(r>1?r--:r=20,d()):"Unsplash API"===c?m(i):"Flickr API"===c&&h()}))}(),function(){const e=document.querySelector(".weather-icon"),t=document.querySelector(".temperature"),n=document.querySelector(".weather-description"),o=document.querySelector(".wind"),c=document.querySelector(".humidity"),a=document.querySelectorAll("input[name=lang]"),r=document.querySelector(".city"),i=document.querySelector(".weather-error"),s=[{en:"Wind speed",ru:"Скорость ветра"},{en:"Humidity",ru:"Влажность"},{en:"m/s",ru:"м/с"}];async function l(a="en"){const l=`https://api.openweathermap.org/data/2.5/weather?q=${r.value}&lang=${a}&appid=19b49def7b99621ed575529c92f7ba37&units=metric`,d=await fetch(l),m=await d.json();"404"===m.cod?(i.textContent="Error! City not found",u()):"400"===m.cod?(i.textContent="Error! Enter the city",u()):(i.textContent="",e.className="weather-icon owf",e.classList.add(`owf-${m.weather[0].id}`),t.textContent=`${m.main.temp.toFixed(0)}°C`,n.textContent=m.weather[0].description,o.textContent=`${s[0][a]} ${m.wind.speed.toFixed(0)} ${s[2][a]}`,c.textContent=`${s[1][a]} ${m.main.humidity.toFixed(0)}%`)}function u(){e.className="",t.textContent="",n.textContent="",o.textContent="",c.textContent=""}function d(){l(document.querySelector("input[name=lang]:checked").value)}r.value="Минск",r.textContent="Минск",document.addEventListener("DOMContentLoaded",l),r.addEventListener("change",(function(){l()})),a.forEach((e=>e.addEventListener("click",d))),window.addEventListener("beforeunload",(function(){localStorage.setItem("city",r.value)})),window.addEventListener("load",(function(){localStorage.getItem("city")&&(r.value=localStorage.getItem("city"),l())}))}(),function(){const e=document.querySelector(".quote"),t=document.querySelector(".author"),n=document.querySelector(".change-quote"),o=document.querySelectorAll("input[name=lang]");async function c(n="en"){const o=`./assets/data/data_${n}.json`,c=await fetch(o),a=await c.json(),r=(i=a.length,Math.floor(Math.random()*i));var i;e.textContent=`"${a[r].text}"`,t.textContent=`${a[r].author}`}function a(){c(document.querySelector("input[name=lang]:checked").value)}c(),n.addEventListener("click",a),o.forEach((e=>e.addEventListener("click",a)))}(),function(){const t=new Audio,n=document.querySelector(".play"),o=document.querySelector(".play-next"),c=document.querySelector(".play-prev"),a=document.querySelector(".volume"),r=document.querySelector(".play-list"),i=document.querySelector(".progress"),s=document.querySelector(".progress-filled"),l=document.querySelector(".current-time"),u=document.querySelector(".duration"),d=document.querySelector(".volume-progress"),m=document.querySelector(".player-title");e.forEach((e=>{const t=document.createElement("li");t.classList.add("play-item"),t.textContent=e.title,r.append(t)}));let h=0,g=!1;const v=document.querySelectorAll(".play-item");function y(){t.src=e[h].src,t.currentTime=0,t.play(),g=!0,n.classList.add("pause"),v.forEach((e=>{e.classList.contains("item-active")&&e.classList.remove("item-active")})),v[h].classList.add("item-active"),u.textContent=e[h].duration,m.textContent=e[h].title}function f(){g?(n.classList.add("pause"),v[h].classList.add("item-active")):(n.classList.remove("pause"),v[h].classList.remove("item-active"))}function p(){h<e.length-1?h++:h=0,y()}function S(e){const n=e.offsetX/i.offsetWidth*t.duration;t.currentTime=n}function q(){const e=d.value;d.style.background=`linear-gradient(to right, #710707 0%, #710707 ${100*e}%, #c4c4c4 ${100*e}%, #c4c4c4 100%)`}m.textContent=e[0].title,l.textContent="00:00",u.textContent=e[0].duration,t.src=e[0].src,t.currentTime=0,v.forEach(((n,o)=>n.addEventListener("click",(()=>{h=o,v.forEach(((e,n)=>{e.classList.contains("item-active")&&n!==o&&(e.classList.remove("item-active"),t.pause())})),t.src=e[h].src,t.currentTime=0,u.textContent=e[h].duration,m.textContent=e[h].title,n.classList.contains("item-active")?(g=!1,t.pause()):(g=!0,t.play()),f()})))),n.addEventListener("click",(function(){g?(t.pause(),g=!1):(t.play(),g=!0),f()})),o.addEventListener("click",p),c.addEventListener("click",(function(){h>0?h--:h=e.length-1,y()})),a.addEventListener("click",(function(){t.muted?(t.muted=!1,d.value=.5,t.volume=d.value,q()):(t.muted=!0,d.value=0,q())}));let L=!1;i.addEventListener("click",S),i.addEventListener("mousemove",(e=>L&&S(e))),i.addEventListener("mousedown",(()=>L=!0)),i.addEventListener("mouseup",(()=>L=!1)),t.addEventListener("timeupdate",(function(){const e=Math.floor(t.currentTime)/Math.floor(t.duration)*100;s.style.width=`${e}%`,l.textContent=function(e){e=Math.floor(e);var t=Math.floor(e/60),n=Math.floor(e-60*t),o=t,c=n;return t<10&&(o="0"+t),n<10&&(c="0"+n),o+":"+c}(t.currentTime)})),d.addEventListener("input",(function(){const e=d.value;t.volume=e,0===t.volume?t.muted=!0:t.muted=!1,q()})),t.addEventListener("volumechange",(function(){t.muted||0===t.volume?a.classList.add("mute"):a.classList.remove("mute")})),t.addEventListener("ended",p)}()})()})();